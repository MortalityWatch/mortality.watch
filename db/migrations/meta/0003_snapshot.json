{
  "version": "6",
  "dialect": "sqlite",
  "id": "c04f327a-39b7-46c8-8d4b-d44c51f6de5c",
  "prevId": "101b52f9-3521-481f-906f-7f258dbd80c3",
  "tables": {
    "data_quality_overrides": {
      "name": "data_quality_overrides",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "iso3c": {
          "name": "iso3c",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'monitor'"
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "updated_by": {
          "name": "updated_by",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "idx_data_quality_unique": {
          "name": "idx_data_quality_unique",
          "columns": [
            "iso3c",
            "source"
          ],
          "isUnique": false
        },
        "idx_data_quality_status": {
          "name": "idx_data_quality_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "data_quality_overrides_updated_by_users_id_fk": {
          "name": "data_quality_overrides_updated_by_users_id_fk",
          "tableFrom": "data_quality_overrides",
          "tableTo": "users",
          "columnsFrom": [
            "updated_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "invite_codes": {
      "name": "invite_codes",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_by": {
          "name": "created_by",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "max_uses": {
          "name": "max_uses",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "current_uses": {
          "name": "current_uses",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "grants_pro_until": {
          "name": "grants_pro_until",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_active": {
          "name": "is_active",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "invite_codes_code_unique": {
          "name": "invite_codes_code_unique",
          "columns": [
            "code"
          ],
          "isUnique": true
        },
        "idx_invite_codes_code": {
          "name": "idx_invite_codes_code",
          "columns": [
            "code"
          ],
          "isUnique": false
        },
        "idx_invite_codes_active": {
          "name": "idx_invite_codes_active",
          "columns": [
            "is_active"
          ],
          "isUnique": false
        },
        "idx_invite_codes_expires": {
          "name": "idx_invite_codes_expires",
          "columns": [
            "expires_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "invite_codes_created_by_users_id_fk": {
          "name": "invite_codes_created_by_users_id_fk",
          "tableFrom": "invite_codes",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "saved_charts": {
      "name": "saved_charts",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "chart_state": {
          "name": "chart_state",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "chart_type": {
          "name": "chart_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "thumbnail_url": {
          "name": "thumbnail_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "is_featured": {
          "name": "is_featured",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "is_public": {
          "name": "is_public",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "view_count": {
          "name": "view_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "saved_charts_slug_unique": {
          "name": "saved_charts_slug_unique",
          "columns": [
            "slug"
          ],
          "isUnique": true
        },
        "idx_saved_charts_user": {
          "name": "idx_saved_charts_user",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_saved_charts_featured": {
          "name": "idx_saved_charts_featured",
          "columns": [
            "is_featured"
          ],
          "isUnique": false
        },
        "idx_saved_charts_public": {
          "name": "idx_saved_charts_public",
          "columns": [
            "is_public"
          ],
          "isUnique": false
        },
        "idx_saved_charts_slug": {
          "name": "idx_saved_charts_slug",
          "columns": [
            "slug"
          ],
          "isUnique": false
        },
        "idx_saved_charts_created": {
          "name": "idx_saved_charts_created",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "saved_charts_user_id_users_id_fk": {
          "name": "saved_charts_user_id_users_id_fk",
          "tableFrom": "saved_charts",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "sessions": {
      "name": "sessions",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "expires_at": {
          "name": "expires_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "idx_sessions_user": {
          "name": "idx_sessions_user",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_sessions_expires": {
          "name": "idx_sessions_expires",
          "columns": [
            "expires_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "sessions_user_id_users_id_fk": {
          "name": "sessions_user_id_users_id_fk",
          "tableFrom": "sessions",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "subscriptions": {
      "name": "subscriptions",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "user_id": {
          "name": "user_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'inactive'"
        },
        "plan": {
          "name": "plan",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "plan_price_id": {
          "name": "plan_price_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "current_period_start": {
          "name": "current_period_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "current_period_end": {
          "name": "current_period_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "cancel_at_period_end": {
          "name": "cancel_at_period_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "canceled_at": {
          "name": "canceled_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "trial_end": {
          "name": "trial_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "subscriptions_user_id_unique": {
          "name": "subscriptions_user_id_unique",
          "columns": [
            "user_id"
          ],
          "isUnique": true
        },
        "subscriptions_stripe_customer_id_unique": {
          "name": "subscriptions_stripe_customer_id_unique",
          "columns": [
            "stripe_customer_id"
          ],
          "isUnique": true
        },
        "subscriptions_stripe_subscription_id_unique": {
          "name": "subscriptions_stripe_subscription_id_unique",
          "columns": [
            "stripe_subscription_id"
          ],
          "isUnique": true
        },
        "idx_subscriptions_user": {
          "name": "idx_subscriptions_user",
          "columns": [
            "user_id"
          ],
          "isUnique": false
        },
        "idx_subscriptions_stripe_customer": {
          "name": "idx_subscriptions_stripe_customer",
          "columns": [
            "stripe_customer_id"
          ],
          "isUnique": false
        },
        "idx_subscriptions_stripe_subscription": {
          "name": "idx_subscriptions_stripe_subscription",
          "columns": [
            "stripe_subscription_id"
          ],
          "isUnique": false
        },
        "idx_subscriptions_status": {
          "name": "idx_subscriptions_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "idx_subscriptions_period_end": {
          "name": "idx_subscriptions_period_end",
          "columns": [
            "current_period_end"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "subscriptions_user_id_users_id_fk": {
          "name": "subscriptions_user_id_users_id_fk",
          "tableFrom": "subscriptions",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "users": {
      "name": "users",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "password_hash": {
          "name": "password_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'user'"
        },
        "tier": {
          "name": "tier",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 1
        },
        "email_verified": {
          "name": "email_verified",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "verification_token": {
          "name": "verification_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "verification_token_expires": {
          "name": "verification_token_expires",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "password_reset_token": {
          "name": "password_reset_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "password_reset_token_expires": {
          "name": "password_reset_token_expires",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "tos_accepted_at": {
          "name": "tos_accepted_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_login": {
          "name": "last_login",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "invited_by_code_id": {
          "name": "invited_by_code_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        }
      },
      "indexes": {
        "users_email_unique": {
          "name": "users_email_unique",
          "columns": [
            "email"
          ],
          "isUnique": true
        },
        "idx_users_email": {
          "name": "idx_users_email",
          "columns": [
            "email"
          ],
          "isUnique": false
        },
        "idx_users_tier": {
          "name": "idx_users_tier",
          "columns": [
            "tier"
          ],
          "isUnique": false
        },
        "idx_users_role": {
          "name": "idx_users_role",
          "columns": [
            "role"
          ],
          "isUnique": false
        },
        "idx_verification_token": {
          "name": "idx_verification_token",
          "columns": [
            "verification_token"
          ],
          "isUnique": false
        },
        "idx_password_reset_token": {
          "name": "idx_password_reset_token",
          "columns": [
            "password_reset_token"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "users_invited_by_code_id_invite_codes_id_fk": {
          "name": "users_invited_by_code_id_invite_codes_id_fk",
          "tableFrom": "users",
          "tableTo": "invite_codes",
          "columnsFrom": [
            "invited_by_code_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "webhook_events": {
      "name": "webhook_events",
      "columns": {
        "id": {
          "name": "id",
          "type": "integer",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": true
        },
        "stripe_event_id": {
          "name": "stripe_event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "payload": {
          "name": "payload",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "processed": {
          "name": "processed",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": false
        },
        "processing_error": {
          "name": "processing_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(unixepoch())"
        },
        "processed_at": {
          "name": "processed_at",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "webhook_events_stripe_event_id_unique": {
          "name": "webhook_events_stripe_event_id_unique",
          "columns": [
            "stripe_event_id"
          ],
          "isUnique": true
        },
        "idx_webhook_events_stripe_id": {
          "name": "idx_webhook_events_stripe_id",
          "columns": [
            "stripe_event_id"
          ],
          "isUnique": false
        },
        "idx_webhook_events_type": {
          "name": "idx_webhook_events_type",
          "columns": [
            "event_type"
          ],
          "isUnique": false
        },
        "idx_webhook_events_processed": {
          "name": "idx_webhook_events_processed",
          "columns": [
            "processed"
          ],
          "isUnique": false
        },
        "idx_webhook_events_created": {
          "name": "idx_webhook_events_created",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}